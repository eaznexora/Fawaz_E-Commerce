<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details | Fawaz Fragrance</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baskervville:ital@0;1&display=swap" rel="stylesheet">
    <!-- Favicon -->
  <link rel="icon" href="Favicon.png" type="image/png">
    
    <style>
        /* --- CORE STYLES --- */
        :root {
            --bg-cream: #F8F5F0; --text-dark-brown: #3E2B26; --bar-brown: #A68B6C;
            --box-beige: #F4EFE6; --footer-bg: #5B3E36; --footer-text: #F8F5F0;
            --nav-pill-dark: #BCA380; --nav-item-light: #DBCDBA; --btn-text: #FFFFFF;
            --btn-gold: #BCA380; --btn-beige: #A68B6C;
        }
        html { scroll-behavior: smooth; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--bg-cream); color: var(--text-dark-brown); font-family: 'Cambria', serif; min-height: 100vh; display: flex; flex-direction: column; overflow-x: hidden; }

        /* --- HEADER (UNIFIED) --- */
        header {
            display: grid; grid-template-columns: 1fr auto 1fr; align-items: center;
            padding: 15px 25px; background-color: var(--bg-cream);
            position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
            transition: top 0.4s ease-in-out; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        header.nav-up { top: -100px; }

        .header-left { display: flex; align-items: center; gap: 25px; }
        .logo-container img { height: 45px; display: block; padding-left: 25px; padding-bottom: 10px;}
        .header-right { display: flex; align-items: center; justify-content: flex-end; }

        .header-icon-btn { 
            background: none; border: none; cursor: pointer; padding: 0; 
            display: flex; align-items: center; justify-content: center; position: relative; 
        }
        .icon-img { width: 24px; height: 24px; object-fit: contain; }

        /* --- BADGE --- */
        .cart-badge {
            position: absolute; top: -5px; right: -8px;
            background-color: #D32F2F; color: white; font-size: 10px; font-weight: bold;
            font-family: sans-serif; width: 18px; height: 18px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--bg-cream); display: none; z-index: 10;
        }

        /* --- HAMBURGER --- */
        .hamburger-btn { background: none; border: none; cursor: pointer; width: 24px; height: 18px; position: relative; display: flex; flex-direction: column; justify-content: space-between; padding: 0; }
        .hamburger-line { width: 100%; height: 2px; background-color: var(--text-dark-brown); border-radius: 2px; transition: 0.3s; }
        .hamburger-btn.active .hamburger-line:nth-child(1) { transform: translateY(8px) rotate(45deg); }
        .hamburger-btn.active .hamburger-line:nth-child(2) { opacity: 0; }
        .hamburger-btn.active .hamburger-line:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }

        /* --- SEARCH OVERLAY --- */
        .search-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 80px; background-color: var(--bg-cream); display: flex; align-items: center; justify-content: center; padding: 0 20px; z-index: 1100; transform: translateY(-100%); transition: transform 0.4s ease; }
        .search-overlay.active { transform: translateY(0); }
        .search-bar-input { width: 80%; padding: 10px; border: none; border-bottom: 2px solid var(--bar-brown); background: transparent; font-family: 'Cambria', serif; font-size: 18px; color: var(--text-dark-brown); outline: none; }
        .close-search-btn { font-size: 30px; background: none; border: none; color: var(--text-dark-brown); cursor: pointer; margin-left: 15px; }

        /* --- MOBILE MENU --- */
        .mobile-menu { position: absolute; top: 100%; left: 0; width: 100vw; background-color: var(--bg-cream); text-align: center; box-shadow: 0 10px 20px rgba(0,0,0,0.1); max-height: 0; opacity: 0; overflow: hidden; transition: max-height 0.4s ease-in-out, opacity 0.3s ease-in-out; z-index: 999; }
        .mobile-menu.active { max-height: 400px; opacity: 1; border-bottom: 2px solid var(--bar-brown); }
        .mobile-menu a { display: block; padding: 20px; text-decoration: none; color: var(--text-dark-brown); font-family: 'Cambria', serif; border-bottom: 1px solid rgba(62,43,38,0.05); }
        
        .desktop-nav { display: none; }

        /* --- PRODUCT DETAIL CONTENT --- */
        .page-content {
            padding: 120px 20px 120px 20px; 
            max-width: 600px; 
            margin: 0 auto;
            width: 100%;
        }

        .top-nav-bar { display: flex; align-items: center; margin-bottom: 20px; }
        .back-circle-btn {
            width: 40px; height: 40px; border-radius: 50%; background-color: #BCA380;
            display: flex; align-items: center; justify-content: center; cursor: pointer; border: none;
            color: white; font-size: 20px; transition: transform 0.2s;
        }
        .back-circle-btn:hover { transform: scale(1.1); }
        .detail-page-title { flex: 1; text-align: center; font-size: 20px; font-weight: 600; margin-right: 40px; }

        .product-hero-image {
            width: 100%; aspect-ratio: 1 / 1; 
            background-color: #D9D9D9; 
            border-radius: 30px; margin-bottom: 25px;
            overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .product-hero-image img { width: 100%; height: 100%; object-fit: cover; }

        .product-title-row { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 5px; }
        .p-title { font-family: 'Baskervville', serif; font-size: 32px; font-weight: 400; line-height: 1.1; }
        .p-rating { display: flex; align-items: center; gap: 5px; font-size: 16px; font-weight: 600; color: var(--text-dark-brown); }
        .star-icon { color: #FFC107; font-size: 18px; }

        .p-price-row { display: flex; align-items: baseline; gap: 10px; margin-bottom: 15px; }
        .current-price { font-size: 24px; font-weight: 700; color: #A68B6C; }
        .old-price { font-size: 16px; text-decoration: line-through; color: #999; }

        .p-tagline { font-weight: 600; font-size: 16px; margin-bottom: 10px; opacity: 0.9; }
        .p-description { font-size: 14px; line-height: 1.6; opacity: 0.8; margin-bottom: 30px; }

        /* --- BOTTOM ACTION BAR --- */
        .bottom-action-bar {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background-color: #A68B6C; 
            padding: 20px 30px;
            border-top-left-radius: 40px; border-top-right-radius: 40px;
            display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            z-index: 2000;
        }

        .checkout-btn {
            background-color: #FDFBF7; color: #A68B6C;
            border: none; padding: 15px 40px; border-radius: 30px;
            font-size: 18px; font-weight: 600; font-family: 'Baskervville', serif;
            flex: 1; margin-right: 20px; cursor: pointer; transition: 0.3s;
        }
        .checkout-btn:hover { background-color: white; transform: translateY(-2px); }

        .cart-circle-btn {
            width: 50px; height: 50px; border-radius: 50%;
            background-color: #FDFBF7; display: flex; align-items: center; justify-content: center;
            border: none; cursor: pointer; transition: 0.3s;
            position: relative;
        }
        .cart-circle-btn img { width: 24px; opacity: 0.8; }
        .cart-circle-btn:hover { transform: scale(1.1); }

        /* --- NEW: TOAST NOTIFICATION STYLES --- */
        #toast-notification {
            visibility: hidden; /* Hidden by default */
            min-width: 250px; 
            background-color: #3E2B26; /* Dark Brown background */
            color: #fff; /* White text */
            text-align: center; 
            border-radius: 50px; 
            padding: 16px; 
            position: fixed; 
            z-index: 3000; 
            left: 50%; 
            bottom: 100px; /* Start slightly lower */
            transform: translateX(-50%);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            font-family: 'Cambria', serif;
            font-size: 16px;
            opacity: 0;
            transition: opacity 0.5s, bottom 0.5s;
        }

        #toast-notification.show {
            visibility: visible;
            opacity: 1;
            bottom: 110px; /* Slide up effect */
        }

        @media (min-width: 900px) {
            header { padding: 20px 50px; }
            .desktop-nav { display: flex; gap: 40px; margin-right: 20px; }
            .desktop-nav a { text-decoration: none; color: var(--text-dark-brown); font-family: 'Cambria', serif; font-weight: 500; }
            .hamburger-btn, .mobile-menu { display: none; }
            .bottom-action-bar { max-width: 600px; left: 50%; transform: translateX(-50%); border-radius: 40px; bottom: 20px; }
        }
    </style>
</head>
<body>

    <div class="search-overlay" id="searchOverlay">
        <input type="text" class="search-bar-input" placeholder="Search fragrances...">
        <button class="close-search-btn" onclick="toggleSearch()">×</button>
    </div>

    <header id="mainHeader">
        <div class="header-left">
            <button class="hamburger-btn" id="menuBtn" onclick="toggleMenu()">
                <span class="hamburger-line"></span><span class="hamburger-line"></span><span class="hamburger-line"></span>
            </button>
            <button class="header-icon-btn" onclick="toggleSearch()" id="searchBtn">
                <img src="./assets/icons/search-bar.svg" alt="Search" class="icon-img">
            </button>
        </div>

        <div class="logo-container">
            <a href="index.html"><img src="./assets/logo/logo-header.png" alt="Fawaz Fragrance"></a>
        </div>

        <div class="header-right">
            <nav class="desktop-nav">
                <a href="index.html">HOME</a>
                <a href="collection.html">COLLECTION</a>
                <a href="#">ABOUT</a>
                <a href="#">CONTACT</a>
            </nav>
            <button class="header-icon-btn" onclick="window.location.href='cart.html'">
                <img src="./assets/icons/kallu-cart.svg" alt="Cart" class="icon-img">
                <span class="cart-badge" id="headerCartBadge">0</span>
            </button>
        </div>

        <div class="mobile-menu" id="mobileMenu">
            <a href="index.html">Home</a><a href="collection.html">Collection</a><a href="#">About</a><a href="#">Contact</a>
        </div>
    </header>

    <main class="page-content">
        
        <div class="top-nav-bar">
            <button class="back-circle-btn" onclick="history.back()">&#8592;</button>
            <div class="detail-page-title">Products Details</div>
        </div>

        <div id="productContainer">
            <div class="product-hero-image">
                <img id="pImg" src="" alt="Product Image"> 
            </div>

            <div class="product-title-row">
                <h1 class="p-title" id="pName">Loading...</h1>
                <div class="p-rating"><span class="star-icon">★</span> <span id="pRating">5.0</span></div>
            </div>

            <div class="p-price-row">
                <span class="current-price" id="pPrice">--</span>
                <span class="old-price" id="pOldPrice">--</span>
            </div>

            <div class="p-tagline" id="pTagline">Loading details...</div>
            <p class="p-description" id="pDesc">Please wait while we fetch the fragrance details for you.</p>
        </div>
    </main>

    <div class="bottom-action-bar">
        <button class="checkout-btn" id="addToCartBtn" >Add to Cart</button>
        
        <button class="cart-circle-btn" onclick="window.location.href='cart.html'">
            <img src="./assets/icons/kallu-cart.svg" alt="Cart">
        </button>
    </div>

    <div id="toast-notification">Added to Cart</div>

    <script>
        // --- HEADER LOGIC ---
        function toggleMenu() {
            var menu = document.getElementById("mobileMenu");
            var btn = document.getElementById("menuBtn");
            menu.classList.toggle("active");
            btn.classList.toggle("active");
        }
        function toggleSearch() {
            document.getElementById("searchOverlay").classList.toggle("active");
        }
        
        // Scroll Logic for Header
        let lastScrollTop = 0;
        const header = document.getElementById("mainHeader");
        window.addEventListener("scroll", function() {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (scrollTop > lastScrollTop) { header.classList.add("nav-up"); } 
            else { header.classList.remove("nav-up"); }
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; 
        });

        // --- DATABASE ---
        const productsDB = {
            "Burberry Weekend": { name: "Burberry Weekend", price: 200, formattedPrice: "Rs. 200", oldPrice: "Rs. 240", img: "./products/Burberry Weekend.png", rating: "4.8", tagline: "Warm, Sweet & Elegant", desc: "A luxurious fusion of soft vanilla and warm amber." },

"Oud Kashmiri": { name: "Oud Kashmiri", price: 250, formattedPrice: "Rs. 250", oldPrice: "Rs. 290", img: "./products/Oud Kashmiri.png", rating: "4.9", tagline: "Rich & Mysterious", desc: "A deep, earthy oud inspired by Kashmiri richness and timeless elegance." },

"D Blue": { name: "D' Blue", price: 250, formattedPrice: "Rs. 250", oldPrice: "Rs. 290", img: "./products/D Blue.png", rating: "5.0", tagline: "Fresh & Confident", desc: "A clean aquatic fragrance with a modern, masculine freshness." },

"Musk Rose": { name: "Musk Rose", price: 250, formattedPrice: "Rs. 250", oldPrice: "Rs. 290", img: "./products/Musk Rose.png", rating: "4.7", tagline: "Soft & Romantic", desc: "A delicate blend of blooming roses and smooth white musk." },

"Dlove Sauvage": { name: "D' love Sauvage", price: 250, formattedPrice: "Rs. 250", oldPrice: "Rs. 290", img: "./products/Dlove Sauvage.png", rating: "4.9", tagline: "Wild & Fresh", desc: "A bold fusion of fresh citrus and rugged woody notes inspired by nature." },

"Majestic": { name: "Majestic", price: 160, formattedPrice: "Rs. 160", oldPrice: "Rs. 200", img: "./products/Majestic.png", rating: "4.8", tagline: "Royal & Powerful", desc: "A commanding oriental fragrance crafted for a truly royal presence." },

"Musk Rijali": { name: "Musk Rijali", price: 250, formattedPrice: "Rs. 250", oldPrice: "Rs. 290", img: "./products/Musk Rijali.png", rating: "5.0", tagline: "Pure & Sacred", desc: "An authentic soft musk fragrance with a clean, spiritual depth." },

"Oud 9": { name: "Oud 9", price: 160, formattedPrice: "Rs. 160", oldPrice: "Rs. 200", img: "./products/Oud 9.png", rating: "4.7", tagline: "Dark & Intense", desc: "A powerful oud blend with smoky warmth and long-lasting intensity." },

"Oud Kuwaiti": { name: "Oud Kuwaiti", price: 250, formattedPrice: "Rs. 250", oldPrice: "Rs. 290", img: "./products/Oud Kuwaiti.png", rating: "4.9", tagline: "Arabian Luxury", desc: "A premium Middle Eastern oud with rich woody depth and luxurious warmth." },

"Oud Lavender": { name: "Oud Lavender", price: 250, formattedPrice: "Rs. 250", oldPrice: "Rs. 290", img: "./products/Oud Lavender.png", rating: "4.8", tagline: "Calm & Sophisticated", desc: "A refined fusion of calming lavender and deep oud." },

            "default": { name: "Unknown Product", price: 0, formattedPrice: "--", oldPrice: "--", img: "", rating: "0.0", tagline: "Product not found", desc: "We couldn't find the product you are looking for." }
        };

        // --- PAGE LOAD & BADGE LOGIC ---
        document.addEventListener("DOMContentLoaded", function() {
            // Load Product Data
            const params = new URLSearchParams(window.location.search);
            const productId = params.get('id');
            const data = productsDB[productId] || productsDB["default"];

            document.getElementById('pName').innerText = data.name;
            document.getElementById('pPrice').innerText = data.formattedPrice; 
            document.getElementById('pOldPrice').innerText = data.oldPrice;
            document.getElementById('pImg').src = data.img;
            document.getElementById('pRating').innerText = data.rating;
            document.getElementById('pTagline').innerText = data.tagline;
            document.getElementById('pDesc').innerText = data.desc;
            
            updateCartBadges(); // Update badges immediately
        });

        function updateCartBadges() {
            let cart = JSON.parse(localStorage.getItem('fawazCart')) || [];
            const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            const badges = document.querySelectorAll('.cart-badge');
            badges.forEach(badge => {
                if (totalCount > 0) {
                    badge.style.display = 'flex';
                    badge.innerText = totalCount;
                } else {
                    badge.style.display = 'none';
                }
            });
        }

        // --- SHOW TOAST FUNCTION ---
        function showToast(message) {
            var toast = document.getElementById("toast-notification");
            toast.innerText = message;
            toast.className = "show"; // Make visible
            
            // Hide after 3 seconds
            setTimeout(function(){ 
                toast.className = toast.className.replace("show", ""); 
            }, 3000);
        }

        // --- ADD TO CART ---
        document.getElementById('addToCartBtn').addEventListener('click', function() {
            const params = new URLSearchParams(window.location.search);
            const productId = params.get('id');
            const data = productsDB[productId] || productsDB["default"];

            if (data.name === "Unknown Product") return;

            let cart = JSON.parse(localStorage.getItem('fawazCart')) || [];
            let existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: productId,
                    name: data.name,
                    price: data.price, 
                    img: data.img,
                    tagline: data.tagline,
                    quantity: 1
                });
            }

            localStorage.setItem('fawazCart', JSON.stringify(cart));
            updateCartBadges(); 
            
            // REPLACED ALERT WITH TOAST
            showToast(data.name + " added to your cart!");
        });
    </script>
</body>
</html>